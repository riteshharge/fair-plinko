# üéØ Plinko Fairness Verification Project

This project implements a **provably fair Plinko game** for the **Daphnis Labs Full Stack Intern Assignment**.  
It demonstrates deterministic randomness using cryptographic hashing and a seeded PRNG to guarantee fairness and verifiability.

---

## üöÄ Tech Stack

| Layer    | Technology                            |
| -------- | ------------------------------------- |
| Frontend | React (Vite)                          |
| Backend  | Node.js (Express)                     |
| Database | PostgreSQL                            |
| ORM      | Prisma                                |
| Styling  | Tailwind / CSS                        |
| Hashing  | SHA-256 (`crypto` module)             |
| PRNG     | Deterministic XORShift implementation |

---

## ‚öôÔ∏è Setup & Installation

### 1Ô∏è‚É£ Clone & Install Dependencies

```bash
git clone <repo-url>
cd plinko_prisma_project

```

cd backend
npm install
Frontend setup:

bash
Copy code
cd ../frontend
npm install
2Ô∏è‚É£ Environment Variables
Create a .env file inside backend:

env
Copy code
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/plinko_dev?schema=public"
(Adjust credentials for your local PostgreSQL instance.)

3Ô∏è‚É£ Database Setup (Prisma + PostgreSQL)
bash
Copy code
cd backend
npx prisma generate
npx prisma migrate deploy
To explore data visually:

bash
Copy code
npx prisma studio
4Ô∏è‚É£ Run Project
Start backend:

bash
Copy code
cd backend
npm run dev
Start frontend:

bash
Copy code
cd frontend
npm run dev
Then open http://localhost:5173.

üßÆ Fairness Verification and Deterministic Engine
This project follows the provably fair mechanism described in the Daphnis Labs specification.

1Ô∏è‚É£ Hashing and Commitment Scheme
Stage Formula Description
Commit commitHex = SHA256(serverSeed + ":" + nonce) Generated by the server when a new round starts. Prevents tampering with future results.
Combined Seed combinedSeed = SHA256(serverSeed + ":" + clientSeed + ":" + nonce) Used to seed the PRNG to ensure deterministic gameplay.
Reveal After the round, the server reveals serverSeed. Users can verify commitHex independently.

2Ô∏è‚É£ Deterministic PRNG and Engine
The backend engine (backend/engine.js) uses a deterministic XORShift PRNG seeded from combinedSeed.
A fixed peg map and ball path are generated, ensuring the same inputs always produce the same output.

Verified reference test vector (official from spec):

Parameter Value
serverSeed b2a5f3f32a4d9c6ee7a8c1d33456677890abcdeffedcba0987654321ffeeddcc
clientSeed candidate-hello
nonce 42
commitHex bb9acdc67f3f18f3345236a01f0e5072596657a9005c7d8a22cff061451a6b34
combinedSeed e1dddf77de27d395ea2be2ed49aa2a59bd6bf12ee8d350c16c008abd406c07e0
expectedBinIndex 6

Run verification test:

bash
Copy code
cd backend
node --no-warnings test/test_vector.mjs
Expected output:

sql
Copy code
‚úî commitHex matches
‚úî combinedSeed matches
‚úî binIndex matches expected center outcome
ALL KEY ASSERTIONS PASSED (commit/combine/binIndex).
This confirms full compliance with the official fairness test vector.

3Ô∏è‚É£ Verification API
Endpoint:

bash
Copy code
GET /api/verify
Query Parameters:

ini
Copy code
serverSeed=<string>
clientSeed=<string>
nonce=<number>
dropColumn=<number>
Response Example:

json
Copy code
{
"commitHex": "bb9acdc67f3f18f3345236a01f0e5072596657a9005c7d8a22cff061451a6b34",
"combinedSeed": "e1dddf77de27d395ea2be2ed49aa2a59bd6bf12ee8d350c16c008abd406c07e0",
"pegMapHash": "21296c4b32a9cf0993d6988835d5a109d3337791239f411384794251c51e7784",
"binIndex": 6,
"path": ["L", "R", "L", "R", ...]
}
This endpoint allows anyone to verify a completed round independently.

üß± Database Schema (Prisma + PostgreSQL)
File: backend/prisma/schema.prisma

prisma
Copy code
generator client {
provider = "prisma-client-js"
}

datasource db {
provider = "postgresql"
url = env("DATABASE_URL")
}

model Round {
id String @id @default(cuid())
serverSeed String
clientSeed String
nonce Int
commitHex String
combinedSeed String
pegMapHash String
pathJson Json
binIndex Int
createdAt DateTime @default(now())
}
‚ôø Accessibility & Keyboard Controls
‚Üê / ‚Üí ‚Äî Move drop column

Space ‚Äî Drop the ball

M ‚Äî Mute/unmute sound

T ‚Äî Toggle tilt effect

G ‚Äî Toggle debug overlay

Honors system‚Äôs prefers-reduced-motion setting.

Sound mute preference is stored persistently via localStorage.

ü§ñ AI Usage Disclosure
This project used OpenAI‚Äôs GPT-5 for:

Generating the verification test script (test/test_vector.mjs)

Improving documentation and README formatting

Adding accessibility (keyboard/mute/reduced motion) helpers in the React frontend

All deterministic game logic, backend routes, database schema, and fairness algorithms were manually implemented and validated by the developer.
AI assistance was limited to documentation and boilerplate generation.

üßæ License & Attribution
This project is created for the Daphnis Labs Full Stack Intern Assessment (Plinko Fairness Project).
All rights reserved ¬© 2025.

‚úÖ Submission Checklist
Verified test vector passes (node test/test_vector.mjs)

/api/verify endpoint functional

PostgreSQL connected via Prisma

Frontend responsive and accessible

README includes fairness, PRNG, AI disclosure
